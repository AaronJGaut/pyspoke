#!/usr/bin/env python
import sys

channels = sys.argv[1:]

import asyncio
from spoke.client import Client

async def echo(msg):
    print(msg)

async def main():
    client = Client()
    await client.run()
    await asyncio.gather(*[client.subscribe(x, echo) for x in channels])
    await client.wait()

try:
    asyncio.run(main())
except KeyboardInterrupt:
    pass
